modulex.add("dd/plugin/constrain",["base","util","node"],function(t,n,o){var i,e=t("base"),r=t("util"),a=t("node");i=function(t){function n(t){var n,o,i,e=this,r=t.drag,a=r.get("dragNode"),s=e.get("constrain");s&&(g.isWindow(s[0])?e.__constrainRegion={left:n=s.scrollLeft(),top:o=s.scrollTop(),right:n+s.width(),bottom:o+s.height()}:s.getDOMNode?(i=s.offset(),e.__constrainRegion={left:i.left,top:i.top,right:i.left+s.outerWidth(),bottom:i.top+s.outerHeight()}):g.isPlainObject(s)&&(e.__constrainRegion=s),e.__constrainRegion&&(e.__constrainRegion.right-=a.outerWidth(),e.__constrainRegion.bottom-=a.outerHeight()))}function o(t){var n=this,o={},i=t.left,e=t.top,r=n.__constrainRegion;r&&(o.left=Math.min(Math.max(r.left,i),r.right),o.top=Math.min(Math.max(r.top,e),r.bottom),t.drag.setInternal("actualPos",o))}function i(){this.__constrainRegion=null}var s=e,g=r,u=a,c=".-ks-constrain"+g.now(),l=window;return t=s.extend({pluginId:"dd/plugin/constrain",__constrainRegion:null,pluginInitializer:function(t){var e=this;t.on("dragstart"+c,n,e).on("dragend"+c,i,e).on("dragalign"+c,o,e)},pluginDestructor:function(t){t.detach(c,{context:this})}},{ATTRS:{constrain:{valueFn:function(){return u(l)},setter:function(t){if(t){if(t===!0)return u(l);if(t.nodeType||g.isWindow(t)||"string"==typeof t)return u(t)}return t}}}})}(),o.exports=i});