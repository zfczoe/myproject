modulex.add("tabs",["toolbar","util","component/container","xtemplate/runtime","button","component/extension/content-box"],function(e,t,n){var a,s,l,r,i,c,o,d=e("toolbar"),u=e("util"),h=e("component/container"),g=e("xtemplate/runtime"),f=e("button"),b=e("component/extension/content-box");a=function(e){var t=d,n=u,a=t.extend({beforeCreateDom:function(e){e.elAttrs.role="tablist"},bindUI:function(){var e=this;e.on("afterSelectedChange",function(t){t.newVal&&t.target.isTabsTab&&e.set("selectedTab",t.target)})},syncUI:function(){var e=this,t=e.get("children");n.each(t,function(t){return t.get("selected")?(e.setInternal("selectedTab",t),!1):void 0})},handleKeyDownInternal:function(e){var t=this,n=t.get("selectedTab"),a=t.getNextItemByKeyDown(e,n);return"boolean"==typeof a?a:(a.set("selected",!0),!0)},_onSetSelectedTab:function(e,t){var n;e&&(t&&(n=t.prevVal)&&n.set("selected",!1),e.set("selected",!0))},_onSetHighlightedItem:function(e,t){var n=this;n.callSuper(e,t),"mouse"===n.get("changeType")&&n._onSetSelectedTab.apply(n,arguments)}},{ATTRS:{selectedTab:{},changeType:{value:"click"},defaultChildCfg:{valueFn:function(){return{xclass:"tabs-tab"}}}},xclass:"tabs-bar"});return a.ChangeType={CLICK:"click",MOUSE:"mouse"},e=a}(),s=function(e){function t(e,t,n){if(e.get("lazyRender")){var a=e.get("children")[n];if(!a.get("selected"))return a}return s.superclass[t].call(e,n)}var n=h,a=u,s=n.extend({bindUI:function(){var e=this;e.on("afterSelectedPanelIndexChange",function(t){var n,a=e.get("children"),s=t.newVal;a[s]&&((n=a[t.prevVal])&&n.set("selected",!1),e.selectPanelByIndex(s))})},syncUI:function(){var e=this,t=e.get("children");a.each(t,function(t,n){return t.get("selected")?(e.set("selectedPanelIndex",n),!1):void 0})},createChild:function(e){return t(this,"createChild",e)},renderChild:function(e){return t(this,"renderChild",e)},selectPanelByIndex:function(e){this.get("children")[e].set("selected",!0),this.get("lazyRender")&&this.renderChild(e)}},{ATTRS:{allowTextSelection:{value:!0},focusable:{value:!1},handleGestureEvents:{value:!1},selectedPanelIndex:{},lazyRender:{},defaultChildCfg:{valueFn:function(){return{xclass:"tabs-panel"}}}},xclass:"tabs-body"});return e=s}(),l=function(e){var t=e=function(e){function t(e,t){e.data,e.affix;t.data+='\r\n<span class="',i.line=3;var n;return n=h(a,e,{escape:1,params:["close"]},t,["getBaseCssClasses"]),t=t.writeEscaped(n),t.data+='">close</span>\r\n',t}{var n,a=this,s=a.root,l=a.buffer,r=a.scope,i=(a.runtime,a.name,a.pos),c=r.data,o=r.affix,d=s.nativeCommands,u=s.utils,h=u.callFn,g=(u.callCommand,d.range,d.foreach,d.forin,d.each,d["with"],d["if"]);d.set,d.include,d.parse,d.extend,d.block,d.macro,d["debugger"]}l.data+='<div class="';var f;f=h(a,r,{escape:1,params:["content"]},l,["getBaseCssClasses"]),l=l.writeEscaped(f),l.data+='">';var b=(n=o.content)!==e?n:(n=c.content)!==e?n:r.resolveLooseUp(["content"]);l=l.write(b),l.data+="</div>\r\n",i.line=2,i.line=2;var v=(n=o.closable)!==e?n:(n=c.closable)!==e?n:r.resolveLooseUp(["closable"]);return l=g.call(a,r,{params:[v],fn:t},l)};return t.TPL_NAME=n.id||n.name,e}(),r=function(e){var t=h;return e=t.extend({isTabsPanel:1,beforeCreateDom:function(e){var t=this;e.elAttrs.role="tabpanel",e.selected?e.elCls.push(t.getBaseCssClasses("selected")):e.elAttrs["aria-hidden"]=!1},_onSetSelected:function(e){var t=this.$el,n=this.getBaseCssClasses("selected");t[e?"addClass":"removeClass"](n).attr("aria-hidden",!e)}},{ATTRS:{allowTextSelection:{value:!0},focusable:{value:!1},handleGestureEvents:{value:!1},selected:{render:1,sync:0,parse:function(e){return e.hasClass(this.getBaseCssClass("selected"))}}},xclass:"tabs-panel"})}(),i=function(e){var t=l,n=g,a=new n(t);return e=function(){return a.render.apply(a,arguments)}}(),c=function(e){function t(){this.fire("afterTabClose")}var n=f,a=i,s=b;return e=n.extend([s],{initializer:function(){this.publish("beforeTabClose",{defaultFn:t,defaultTargetOnly:!0})},isTabsTab:!0,beforeCreateDom:function(e){var t=e.elAttrs;t.role="tab",e.selected&&(t["aria-selected"]=!0,e.elCls.push(this.getBaseCssClasses("selected"))),e.closable&&e.elCls.push(this.getBaseCssClasses("closable"))},handleClickInternal:function(e){var t=this;return t.get("closable")&&e.target===t.get("closeBtn")[0]?(t.fire("beforeTabClose"),void 0):(t.callSuper(e),t.set("selected",!0),void 0)},_onSetSelected:function(e){var t=this.$el,n=this.getBaseCssClasses("selected");t[e?"addClass":"removeClass"](n).attr("aria-selected",!!e)}},{ATTRS:{allowTextSelection:{value:!1},focusable:{value:!1},handleGestureEvents:{value:!1},contentTpl:{value:a},closable:{value:!1,render:1,sync:0,parse:function(){return!!this.get("closeBtn")}},closeBtn:{selector:function(){return"."+this.getBaseCssClass("close")}},selected:{render:1,sync:0,parse:function(e){return e.hasClass(this.getBaseCssClass("selected"))}}},xclass:"tabs-tab"})}(),o=function(e){function t(e,t,n){e[C[t]]=n}function n(e,t,n){e[1-C[t]]=n}function l(e){this.removeItemByTab(e.target)}function i(e){this.setSelectedTab(e.newVal)}function c(e){var t={};return t.content=e.title,t.selected=e.selected,t.closable=e.closable,t}var o=h,d=a,g=s,f=r,b="top bottom left right",v=u,C={top:0,left:0,bottom:1,right:0},p=o.extend({initializer:function(){var e=this,a=e.get("items");if(a){var s,l,r,i=e.get("children"),o=e.get("barOrientation"),d=e.get("prefixCls"),u={prefixCls:d,xclass:"tabs-bar",changeType:e.get("changeType"),children:[]},h={prefixCls:d,xclass:"tabs-body",lazyRender:e.get("lazyRender"),children:[]},g=u.children,f=h.children;v.each(a,function(e){s=s||e.selected,g.push(l=c(e)),f.push(r={content:e.content,selected:e.selected})}),!s&&g.length&&(g[0].selected=!0,f[0].selected=!0),t(i,o,u),n(i,o,h)}},beforeCreateDom:function(e){e.elCls.push(this.getBaseCssClass(this.get("barOrientation")))},decorateDom:function(){this.get("bar").set("changeType",this.get("changeType"))},bindUI:function(){this.on("afterSelectedTabChange",i),this.on("afterTabClose",l)},addItem:function(e,t){var n,a,s,l=this,r=l.get("bar"),i=r.get("children"),o=l.get("body");return"undefined"==typeof t&&(t=i.length),a=c(e),s={content:e.content},r.addChild(a,t),n=i[t],o.addChild(s,t),e.selected&&(r.set("selectedTab",n),o.set("selectedPanelIndex",t)),l},removeItemAt:function(e,t){var n=this,a=n.get("bar"),s=a.get("children"),l=a.getChildAt(e),r=n.get("body");return l.get("selected")&&(1===s.length?a.set("selectedTab",null):0===e?a.set("selectedTab",a.getChildAt(e+1)):a.set("selectedTab",a.getChildAt(e-1))),a.removeChild(a.getChildAt(e),t),r.removeChild(r.getChildAt(e),t),n},removeItemByTab:function(e,t){var n=v.indexOf(e,this.get("bar").get("children"));return this.removeItemAt(n,t)},removeItemByPanel:function(e,t){var n=v.indexOf(e,this.get("body").get("children"));return this.removeItemAt(n,t)},getSelectedTab:function(){var e=this,t=e.get("bar"),n=null;return v.each(t.get("children"),function(e){return e.get("selected")?(n=e,!1):void 0}),n},getSelectedPanel:function(){var e=this,t=e.get("body"),n=null;return v.each(t.get("children"),function(e){return e.get("selected")?(n=e,!1):void 0}),n},getTabs:function(){return this.get("bar").get("children")},getPanels:function(){return this.get("body").get("children")},getTabAt:function(e){return this.get("bar").get("children")[e]},getPanelAt:function(e){return this.get("body").get("children")[e]},setSelectedTab:function(e){var t=this,n=t.get("bar"),a=t.get("body");return n.set("selectedTab",e),a.set("selectedPanelIndex",v.indexOf(e,n.get("children"))),this},setSelectedPanel:function(e){var t=this,n=t.get("bar"),a=t.get("body"),s=v.indexOf(e,a.get("children"));return a.set("selectedPanelIndex",s),n.set("selectedTab",t.getTabAt(s)),this},_onSetBarOrientation:function(e){var t=this,n=t.$el;n.removeClass(t.getBaseCssClass(b)).addClass(t.getBaseCssClass(e))}},{version:"1.0.1",ATTRS:{handleGestureEvents:{value:!1},allowTextSelection:{value:!0},focusable:{value:!1},items:{},changeType:{},lazyRender:{value:!1},bar:{getter:function(){return this.get("children")[C[this.get("barOrientation")]]}},body:{getter:function(){return this.get("children")[1-C[this.get("barOrientation")]]}},barOrientation:{render:1,sync:0,value:"top",parse:function(e){var t=e[0].className.match(/(top|bottom|left|right)\b/);return t&&t[1]||void 0}}},xclass:"tabs"});return p.Orientation={TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"},p.ChangeType=d.ChangeType,p.Bar=d,p.Body=g,p.Panel=f,e=p}(),n.exports=o});